import { S as Te, i as Me, s as Oe, H as te, d as we, m as Re, o as Le, t as Se, j as Ae, e as u, b as v, w as k, x as o, a as Pe, U as D, f as A, R as Ne, g as r, ap as B, l as z, y as h, p as I, F as Ie, Q as He, aq as Ce, G as Fe } from "./index.min.js";
import { c as fe, a as De } from "./object.min.js";
import { M as Ge } from "./modalLayout.min.js";
import { M as Ue } from "./modalImage.min.js";
import "./close.min.js";
function Ee(t) {
  let e, s = (
    /*errors*/
    t[6].first_name + ""
  ), a;
  return {
    c() {
      e = u("span"), a = k(s), o(e, "class", "sq-block sq-text-xs sq-font-normal sq-text-red");
    },
    m(l, n) {
      A(l, e, n), r(e, a);
    },
    p(l, n) {
      n & /*errors*/
      64 && s !== (s = /*errors*/
      l[6].first_name + "") && h(a, s);
    },
    d(l) {
      l && I(e);
    }
  };
}
function ke(t) {
  let e, s = (
    /*errors*/
    t[6].last_name + ""
  ), a;
  return {
    c() {
      e = u("span"), a = k(s), o(e, "class", "sq-block sq-text-xs sq-font-normal sq-text-red");
    },
    m(l, n) {
      A(l, e, n), r(e, a);
    },
    p(l, n) {
      n & /*errors*/
      64 && s !== (s = /*errors*/
      l[6].last_name + "") && h(a, s);
    },
    d(l) {
      l && I(e);
    }
  };
}
function ve(t) {
  let e, s, a = (
    /*t*/
    t[0]("EMAIL") + ""
  ), l, n, i, q, c, E, m, _ = (
    /*errors*/
    t[6].email && he(t)
  );
  return {
    c() {
      e = u("div"), s = u("label"), l = k(a), n = v(), i = u("input"), c = v(), _ && _.c(), o(s, "for", "email"), o(s, "class", "sq-block sq-text-sm sq-font-semibold sq-mb-1 sq-text-black"), o(i, "id", "email"), o(i, "name", "email"), o(i, "class", q = `sq-rounded sq-p-2 sq-text-sm sq-border  ${/*errors*/
      t[6].email ? "sq-input-error" : ""}`), D(i, "width", "-webkit-fill-available"), o(e, "class", "sq-w-full sq-mt-1 sq-mb-5");
    },
    m(d, g) {
      A(d, e, g), r(e, s), r(s, l), r(e, n), r(e, i), B(
        i,
        /*formData*/
        t[5].email
      ), r(e, c), _ && _.m(e, null), E || (m = z(
        i,
        "input",
        /*input_input_handler*/
        t[19]
      ), E = !0);
    },
    p(d, g) {
      g & /*t*/
      1 && a !== (a = /*t*/
      d[0]("EMAIL") + "") && h(l, a), g & /*errors*/
      64 && q !== (q = `sq-rounded sq-p-2 sq-text-sm sq-border  ${/*errors*/
      d[6].email ? "sq-input-error" : ""}`) && o(i, "class", q), g & /*formData*/
      32 && i.value !== /*formData*/
      d[5].email && B(
        i,
        /*formData*/
        d[5].email
      ), /*errors*/
      d[6].email ? _ ? _.p(d, g) : (_ = he(d), _.c(), _.m(e, null)) : _ && (_.d(1), _ = null);
    },
    d(d) {
      d && I(e), _ && _.d(), E = !1, m();
    }
  };
}
function he(t) {
  let e, s = (
    /*errors*/
    t[6].email + ""
  ), a;
  return {
    c() {
      e = u("span"), a = k(s), o(e, "class", "sq-block sq-text-xs sq-font-normal sq-text-red");
    },
    m(l, n) {
      A(l, e, n), r(e, a);
    },
    p(l, n) {
      n & /*errors*/
      64 && s !== (s = /*errors*/
      l[6].email + "") && h(a, s);
    },
    d(l) {
      l && I(e);
    }
  };
}
function ge(t) {
  let e, s;
  return {
    c() {
      e = u("span"), s = k(
        /*reportReasonError*/
        t[7]
      ), o(e, "class", "sq-block sq-text-xs sq-font-normal sq-text-red");
    },
    m(a, l) {
      A(a, e, l), r(e, s);
    },
    p(a, l) {
      l & /*reportReasonError*/
      128 && h(
        s,
        /*reportReasonError*/
        a[7]
      );
    },
    d(a) {
      a && I(e);
    }
  };
}
function Be(t) {
  let e, s = (
    /*t*/
    t[0]("REPORT") + ""
  ), a, l, n, i, q;
  return {
    c() {
      e = u("button"), a = k(s), e.disabled = /*disabled*/
      t[10], o(e, "class", l = "sq-cursor-pointer " + /*settings*/
      (t[2]?.buttons?.class ? (
        /*settings*/
        t[2]?.buttons?.class
      ) : "sq-bg-black sq-text-white sq-text-sm sq-font-semibold sq-py-3 sq-my-4")), o(e, "style", n = "width: -webkit-fill-available; " + te(
        /*settings*/
        t[2]?.buttons?.css ?? {}
      ));
    },
    m(c, E) {
      A(c, e, E), r(e, a), i || (q = z(
        e,
        "click",
        /*handleClick*/
        t[14]
      ), i = !0);
    },
    p(c, E) {
      E & /*t*/
      1 && s !== (s = /*t*/
      c[0]("REPORT") + "") && h(a, s), E & /*disabled*/
      1024 && (e.disabled = /*disabled*/
      c[10]), E & /*settings*/
      4 && l !== (l = "sq-cursor-pointer " + /*settings*/
      (c[2]?.buttons?.class ? (
        /*settings*/
        c[2]?.buttons?.class
      ) : "sq-bg-black sq-text-white sq-text-sm sq-font-semibold sq-py-3 sq-my-4")) && o(e, "class", l), E & /*settings*/
      4 && n !== (n = "width: -webkit-fill-available; " + te(
        /*settings*/
        c[2]?.buttons?.css ?? {}
      )) && o(e, "style", n);
    },
    d(c) {
      c && I(e), i = !1, q();
    }
  };
}
function We(t) {
  let e, s = (
    /*t*/
    t[0]("LOADING") + ""
  ), a;
  return {
    c() {
      e = u("div"), a = k(s), o(e, "class", "py-5");
    },
    m(l, n) {
      A(l, e, n), r(e, a);
    },
    p(l, n) {
      n & /*t*/
      1 && s !== (s = /*t*/
      l[0]("LOADING") + "") && h(a, s);
    },
    d(l) {
      l && I(e);
    }
  };
}
function Ye(t) {
  let e;
  function s(n, i) {
    return (
      /*isSuccess*/
      n[11] ? Qe : ze
    );
  }
  let a = s(t), l = a(t);
  return {
    c() {
      l.c(), e = Fe();
    },
    m(n, i) {
      l.m(n, i), A(n, e, i);
    },
    p(n, i) {
      a === (a = s(n)) && l ? l.p(n, i) : (l.d(1), l = a(n), l && (l.c(), l.m(e.parentNode, e)));
    },
    d(n) {
      l.d(n), n && I(e);
    }
  };
}
function ze(t) {
  let e, s, a, l;
  return {
    c() {
      e = u("div"), s = k("Error: "), a = k(
        /*uploadErrorMessage*/
        t[13]
      ), o(e, "class", l = `sq-mt-3 sq-p-4 sq-text-black ${/*settings*/
      t[2].frontend_upload_button?.success_message?.class}`), D(e, "border", "2px solid black"), D(e, "width", "-webkit-fill-available");
    },
    m(n, i) {
      A(n, e, i), r(e, s), r(e, a);
    },
    p(n, i) {
      i & /*uploadErrorMessage*/
      8192 && h(
        a,
        /*uploadErrorMessage*/
        n[13]
      ), i & /*settings*/
      4 && l !== (l = `sq-mt-3 sq-p-4 sq-text-black ${/*settings*/
      n[2].frontend_upload_button?.success_message?.class}`) && o(e, "class", l);
    },
    d(n) {
      n && I(e);
    }
  };
}
function Qe(t) {
  let e, s = (
    /*t*/
    t[0]("REPORTED_SUCCESSFULLY") + ""
  ), a, l;
  return {
    c() {
      e = u("div"), a = k(s), o(e, "class", l = `sq-mt-3 sq-p-4 sq-text-black ${/*settings*/
      t[2].frontend_upload_button?.success_message?.class}`), D(e, "border", "2px solid black"), D(e, "width", "-webkit-fill-available");
    },
    m(n, i) {
      A(n, e, i), r(e, a);
    },
    p(n, i) {
      i & /*t*/
      1 && s !== (s = /*t*/
      n[0]("REPORTED_SUCCESSFULLY") + "") && h(a, s), i & /*settings*/
      4 && l !== (l = `sq-mt-3 sq-p-4 sq-text-black ${/*settings*/
      n[2].frontend_upload_button?.success_message?.class}`) && o(e, "class", l);
    },
    d(n) {
      n && I(e);
    }
  };
}
function je(t) {
  let e, s, a, l, n, i, q, c = (
    /*t*/
    t[0]("REPORT_THIS_IMAGE") + ""
  ), E, m, _, d = (
    /*t*/
    t[0]("REPORT_THIS_IMAGE_DESC") + ""
  ), g, Q, P, O, G, W = (
    /*t*/
    t[0]("FIRST_NAME") + ""
  ), K, J, T, j, X, Z, N, Y, b = (
    /*t*/
    t[0]("LAST_NAME") + ""
  ), ae, _e, H, x, ue, me, ne = parseInt(
    /*settings*/
    t[2].popup.email_input
  ) === 1, ie, U, V, $ = (
    /*t*/
    t[0]("REPORT_REASON") + ""
  ), oe, qe, C, ee, pe, ce, y, M, re, de;
  s = new Ue({
    props: {
      data: (
        /*data*/
        t[1].media_data
      ),
      type: (
        /*data*/
        t[1].type
      ),
      settings: (
        /*settings*/
        t[2]
      )
    }
  });
  let w = (
    /*errors*/
    t[6].first_name && Ee(t)
  ), R = (
    /*errors*/
    t[6].last_name && ke(t)
  ), L = ne && ve(t), S = (
    /*reportReasonError*/
    t[7] && ge(t)
  );
  function be(f, p) {
    return (
      /*isSuccess*/
      f[11] || /*uploadErrorMessage*/
      f[13] ? Ye : (
        /*isLoading*/
        f[12] ? We : Be
      )
    );
  }
  let se = be(t), F = se(t);
  return {
    c() {
      e = u("div"), we(s.$$.fragment), l = v(), n = u("div"), i = u("div"), q = u("span"), E = k(c), m = v(), _ = u("span"), g = k(d), Q = v(), P = u("div"), O = u("div"), G = u("label"), K = k(W), J = v(), T = u("input"), X = v(), w && w.c(), Z = v(), N = u("div"), Y = u("label"), ae = k(b), _e = v(), H = u("input"), ue = v(), R && R.c(), me = v(), L && L.c(), ie = v(), U = u("div"), V = u("label"), oe = k($), qe = v(), C = u("textarea"), pe = v(), S && S.c(), ce = v(), y = u("div"), F.c(), o(e, "class", "sq-w-full sm:sq-w-2/4"), Pe(() => (
        /*div0_elementresize_handler*/
        t[16].call(e)
      )), o(q, "class", "sq-block sq-text-3xl sq-font-semibold sq-mb-2 sq-text-black"), o(_, "class", "sq-block sq-text-[16px] sq-font-normal sq-mb-2 sq-text-black"), o(G, "for", "first_name"), o(G, "class", "sq-block sq-text-sm sq-font-semibold sq-mb-1 sq-text-black"), o(T, "id", "first_name"), o(T, "name", "first_name"), o(T, "class", j = `sq-rounded sq-p-2 sq-text-sm sq-border ${/*errors*/
      t[6].first_name ? "sq-input-error" : ""}`), D(T, "width", "-webkit-fill-available"), o(O, "class", "sq-block"), o(Y, "for", "last_name"), o(Y, "class", "sq-block sq-text-sm sq-font-semibold sq-mb-1"), o(H, "id", "last_name"), o(H, "name", "last_name"), o(H, "class", x = `sq-rounded sq-p-2 sq-text-sm sq-border  ${/*errors*/
      t[6].last_name ? "sq-input-error" : ""}`), D(H, "width", "-webkit-fill-available"), o(N, "class", "sq-block sq-text-black"), o(P, "class", "sq-grid sq-grid-cols-2 sq-gap-3 sq-my-4 sq-overflow-hidden"), o(V, "for", "report_reason"), o(V, "class", "sq-block sq-text-sm sq-font-semibold sq-mb-1 sq-text-black"), o(C, "id", "report_reason"), o(C, "name", "report_reason"), o(C, "class", ee = `sq-rounded sq-p-2 sq-text-sm sq-border sq-flex-1 sq-m-h-1 sq-textarea  ${/*reportReasonError*/
      t[7] ? "sq-input-error" : ""}`), D(C, "width", "-webkit-fill-available"), C.required = !0, o(U, "class", "sq-w-full sq-mb-4 sq-flex sq-flex-col sq-flex-1"), o(y, "class", "sq-w-full"), o(i, "class", "sq-px-6 sm:px-8"), o(n, "class", "sq-w-full sm:sq-w-2/4 sq-py-3 sm:sq-py-5 sq-flex sq-flex-col"), D(
        n,
        "max-height",
        /*mediaWidth*/
        t[8] + "px"
      );
    },
    m(f, p) {
      A(f, e, p), Re(s, e, null), a = Ne(
        e,
        /*div0_elementresize_handler*/
        t[16].bind(e)
      ), A(f, l, p), A(f, n, p), r(n, i), r(i, q), r(q, E), r(i, m), r(i, _), r(_, g), r(i, Q), r(i, P), r(P, O), r(O, G), r(G, K), r(O, J), r(O, T), B(
        T,
        /*formData*/
        t[5].first_name
      ), r(O, X), w && w.m(O, null), r(P, Z), r(P, N), r(N, Y), r(Y, ae), r(N, _e), r(N, H), B(
        H,
        /*formData*/
        t[5].last_name
      ), r(N, ue), R && R.m(N, null), r(i, me), L && L.m(i, null), r(i, ie), r(i, U), r(U, V), r(V, oe), r(U, qe), r(U, C), B(
        C,
        /*formData*/
        t[5].report_reason
      ), r(U, pe), S && S.m(U, null), r(i, ce), r(i, y), F.m(y, null), M = !0, re || (de = [
        z(
          T,
          "input",
          /*input0_input_handler*/
          t[17]
        ),
        z(
          H,
          "input",
          /*input1_input_handler*/
          t[18]
        ),
        z(
          C,
          "input",
          /*textarea_input_handler*/
          t[20]
        )
      ], re = !0);
    },
    p(f, p) {
      const le = {};
      p & /*data*/
      2 && (le.data = /*data*/
      f[1].media_data), p & /*data*/
      2 && (le.type = /*data*/
      f[1].type), p & /*settings*/
      4 && (le.settings = /*settings*/
      f[2]), s.$set(le), (!M || p & /*t*/
      1) && c !== (c = /*t*/
      f[0]("REPORT_THIS_IMAGE") + "") && h(E, c), (!M || p & /*t*/
      1) && d !== (d = /*t*/
      f[0]("REPORT_THIS_IMAGE_DESC") + "") && h(g, d), (!M || p & /*t*/
      1) && W !== (W = /*t*/
      f[0]("FIRST_NAME") + "") && h(K, W), (!M || p & /*errors*/
      64 && j !== (j = `sq-rounded sq-p-2 sq-text-sm sq-border ${/*errors*/
      f[6].first_name ? "sq-input-error" : ""}`)) && o(T, "class", j), p & /*formData*/
      32 && T.value !== /*formData*/
      f[5].first_name && B(
        T,
        /*formData*/
        f[5].first_name
      ), /*errors*/
      f[6].first_name ? w ? w.p(f, p) : (w = Ee(f), w.c(), w.m(O, null)) : w && (w.d(1), w = null), (!M || p & /*t*/
      1) && b !== (b = /*t*/
      f[0]("LAST_NAME") + "") && h(ae, b), (!M || p & /*errors*/
      64 && x !== (x = `sq-rounded sq-p-2 sq-text-sm sq-border  ${/*errors*/
      f[6].last_name ? "sq-input-error" : ""}`)) && o(H, "class", x), p & /*formData*/
      32 && H.value !== /*formData*/
      f[5].last_name && B(
        H,
        /*formData*/
        f[5].last_name
      ), /*errors*/
      f[6].last_name ? R ? R.p(f, p) : (R = ke(f), R.c(), R.m(N, null)) : R && (R.d(1), R = null), p & /*settings*/
      4 && (ne = parseInt(
        /*settings*/
        f[2].popup.email_input
      ) === 1), ne ? L ? L.p(f, p) : (L = ve(f), L.c(), L.m(i, ie)) : L && (L.d(1), L = null), (!M || p & /*t*/
      1) && $ !== ($ = /*t*/
      f[0]("REPORT_REASON") + "") && h(oe, $), (!M || p & /*reportReasonError*/
      128 && ee !== (ee = `sq-rounded sq-p-2 sq-text-sm sq-border sq-flex-1 sq-m-h-1 sq-textarea  ${/*reportReasonError*/
      f[7] ? "sq-input-error" : ""}`)) && o(C, "class", ee), p & /*formData*/
      32 && B(
        C,
        /*formData*/
        f[5].report_reason
      ), /*reportReasonError*/
      f[7] ? S ? S.p(f, p) : (S = ge(f), S.c(), S.m(U, null)) : S && (S.d(1), S = null), se === (se = be(f)) && F ? F.p(f, p) : (F.d(1), F = se(f), F && (F.c(), F.m(y, null))), (!M || p & /*mediaWidth*/
      256) && D(
        n,
        "max-height",
        /*mediaWidth*/
        f[8] + "px"
      );
    },
    i(f) {
      M || (Le(s.$$.fragment, f), M = !0);
    },
    o(f) {
      Se(s.$$.fragment, f), M = !1;
    },
    d(f) {
      f && I(e), Ae(s), a(), f && I(l), f && I(n), w && w.d(), R && R.d(), L && L.d(), S && S.d(), F.d(), re = !1, Ie(de);
    }
  };
}
function Ke(t) {
  let e, s, a = (
    /*t*/
    t[0]("BACK") + ""
  ), l, n, i, q = (
    /*t*/
    t[0]("POWERED_BY_SQUARELOVIN") + ""
  ), c, E, m;
  return {
    c() {
      e = u("div"), s = u("span"), l = k(a), n = v(), i = u("span"), c = k(q), o(s, "class", "sq-cursor-pointer sq-pr-2 sq-text-xs sq-font-semibold sq-uppercase"), o(i, "class", "sq-pl-2 sq-text-xs sq-font-semibold sq-uppercase"), o(e, "class", "sq-flex sq-w-full sq-justify-between sq-mt-1 sq-pb-2");
    },
    m(_, d) {
      A(_, e, d), r(e, s), r(s, l), r(e, n), r(e, i), r(i, c), E || (m = [
        z(s, "keypress", null),
        z(
          s,
          "click",
          /*backModalEvent*/
          t[15]
        )
      ], E = !0);
    },
    p(_, d) {
      d & /*t*/
      1 && a !== (a = /*t*/
      _[0]("BACK") + "") && h(l, a), d & /*t*/
      1 && q !== (q = /*t*/
      _[0]("POWERED_BY_SQUARELOVIN") + "") && h(c, q);
    },
    d(_) {
      _ && I(e), E = !1, Ie(m);
    }
  };
}
function Ve(t) {
  let e, s;
  return e = new Ge({
    props: {
      settings: (
        /*settings*/
        t[2]
      ),
      styles: te(
        /*settings*/
        t[2].popup.css
      ),
      containerClass: "sm:sq-flex-row",
      layout: "50x50",
      onEvent: (
        /*func*/
        t[21]
      ),
      $$slots: {
        footer: [Ke],
        content: [je]
      },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      we(e.$$.fragment);
    },
    m(a, l) {
      Re(e, a, l), s = !0;
    },
    p(a, [l]) {
      const n = {};
      l & /*settings*/
      4 && (n.settings = /*settings*/
      a[2]), l & /*settings*/
      4 && (n.styles = te(
        /*settings*/
        a[2].popup.css
      )), l & /*onEvent, config*/
      24 && (n.onEvent = /*func*/
      a[21]), l & /*$$scope, t, mediaWidth, settings, isSuccess, uploadErrorMessage, isLoading, disabled, reportReasonError, formData, errors, mediaHeight, data*/
      16793575 && (n.$$scope = { dirty: l, ctx: a }), e.$set(n);
    },
    i(a) {
      s || (Le(e.$$.fragment, a), s = !0);
    },
    o(a) {
      Se(e.$$.fragment, a), s = !1;
    },
    d(a) {
      Ae(e, a);
    }
  };
}
function ye(t, e, s) {
  let { t: a } = e, { data: l } = e, { settings: n } = e, { onEvent: i } = e, { config: q } = e, c = {
    first_name: fe().required(a("PLEASE_FILL_THE_FIRST_NAME")),
    last_name: fe().required(a("PLEASE_FILL_THE_LAST_NAME")),
    email: fe().email("email").required(a("PLEASE_FILL_THE_EMAIL"))
  };
  parseInt(n.popup.email_input) === 1 && parseInt(n.popup.email_required) === 1 && (c.email = c.email.required(a("PLEASE_FILL_THE_EMAIL")));
  const E = De().shape(c), m = {
    first_name: "",
    last_name: "",
    email: "",
    report_reason: "",
    suuid: q.subuuid,
    stream_id: q.stream,
    collected_media_id: l.id
  };
  let _ = {
    first_name: null,
    last_name: null,
    email: null
  }, d = null, g = 0, Q = 0, P = !1, O = !1, G = !1, W = "";
  function K() {
    m.report_reason === "" ? s(7, d = a("PLEASE_FILL_THE_REASON")) : s(7, d = null), E.validate(m, { abortEarly: !1 }).then(() => {
      s(12, G = !0), s(6, _ = {
        first_name: null,
        last_name: null,
        email: null
      }), s(10, P = !0), He.post(`${n.links.social_api}/frontend/media/report`, m).then((b) => {
        s(11, O = !0), s(5, m.first_name = "", m), s(5, m.last_name = "", m), s(5, m.email = "", m), s(5, m.report_reason = "", m), setTimeout(
          () => {
            i("closeModal", { config: q });
          },
          3e3
        );
      }).catch((b) => {
        s(13, W = b.message), console.error(b);
      }).finally(() => {
        s(10, P = !1), s(12, G = !1);
      });
    }).catch((b) => {
      s(10, P = !1), s(6, _ = Ce(b));
    });
  }
  function J() {
    i("closeModal", {
      config: q,
      callback: () => setTimeout(
        () => {
          i("selectPost", { post: l, config: q });
        },
        100
      )
    });
  }
  function T() {
    Q = this.clientHeight, g = this.clientWidth, s(9, Q), s(8, g);
  }
  function j() {
    m.first_name = this.value, s(5, m);
  }
  function X() {
    m.last_name = this.value, s(5, m);
  }
  function Z() {
    m.email = this.value, s(5, m);
  }
  function N() {
    m.report_reason = this.value, s(5, m);
  }
  const Y = () => i("closeModal", { config: q });
  return t.$$set = (b) => {
    "t" in b && s(0, a = b.t), "data" in b && s(1, l = b.data), "settings" in b && s(2, n = b.settings), "onEvent" in b && s(3, i = b.onEvent), "config" in b && s(4, q = b.config);
  }, [
    a,
    l,
    n,
    i,
    q,
    m,
    _,
    d,
    g,
    Q,
    P,
    O,
    G,
    W,
    K,
    J,
    T,
    j,
    X,
    Z,
    N,
    Y
  ];
}
class es extends Te {
  constructor(e) {
    super(), Me(this, e, ye, Ve, Oe, {
      t: 0,
      data: 1,
      settings: 2,
      onEvent: 3,
      config: 4
    });
  }
}
export {
  es as default
};
